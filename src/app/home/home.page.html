<!-- Menu latéral avec la liste des catégories -->
<ion-menu contentId="main-content">
  <ion-header>
    <ion-toolbar color="primary">
      <ion-title>Catégories</ion-title>
    </ion-toolbar>
    <!-- Barre de recherche pour filtrer les catégories -->
    <ion-searchbar [(ngModel)]="searchTerm" (ionInput)="filterCategories()" placeholder="Rechercher une catégorie"></ion-searchbar>
  </ion-header>

  <ion-content class="ion-padding">
    <ion-list>
      <!-- Boucle sur les catégories filtrées -->
      <ion-item *ngFor="let category of filteredCategories" (click)="selectCategory(category)">
        {{ category.name }}
      </ion-item>
    </ion-list>

    <!-- Boutons pour ajouter et supprimer des catégories -->
    <ion-item lines="none" class="category-action-buttons">
      <ion-button expand="block" (click)="showAddCategoryForm()" color="success">
        Ajouter une catégorie
      </ion-button>

      <ion-button expand="block" color="danger" (click)="deleteSelectedCategory()">
        Supprimer la catégorie sélectionnée
      </ion-button>
    </ion-item>

    <!-- Formulaire pour ajouter une nouvelle catégorie (s'affiche quand isAddingCategory est true) -->
    <div *ngIf="isAddingCategory" class="add-category-form">
      <ion-item>
        <ion-label position="floating">Nom de la catégorie</ion-label>
        <ion-input [(ngModel)]="newCategoryName" placeholder="Entrez le nom de la catégorie"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Description</ion-label>
        <ion-input [(ngModel)]="newCategoryDescription" placeholder="Entrez la description"></ion-input>
      </ion-item>

      <ion-button expand="block" (click)="addCategory()" color="primary">
        Ajouter
      </ion-button>

      <ion-button expand="block" color="light" (click)="cancelAddCategory()">
        Annuler
      </ion-button>
    </div>
  </ion-content>
</ion-menu>

<!-- Contenu principal -->
<div class="ion-page" id="main-content">
  <ion-header>
    <ion-toolbar color="primary">
      <ion-buttons slot="start">
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
      <ion-title>Page d'accueil</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content class="ion-padding">
    <!-- Affiche la description de la catégorie sélectionnée -->
    <div *ngIf="selectedCategory">
      <h2>{{ selectedCategory.name }}</h2>
      <p>{{ selectedCategory.description }}</p>

      <!-- Bouton pour accéder aux livres de la catégorie -->
      <ion-button expand="block" (click)="goToBooks(selectedCategory.id)" color="primary">
        Voir les livres disponibles
      </ion-button>
    </div>

    <!-- Message par défaut lorsque aucune catégorie n'est sélectionnée -->
    <div *ngIf="!selectedCategory">
      <p>Sélectionnez une catégorie dans le menu pour afficher la description.</p>
    </div>
  </ion-content>
</div>
